(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerPolicy&&(t.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?t.credentials="include":i.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(i){if(i.ep)return;i.ep=!0;const t=r(i);fetch(i.href,t)}})();function q(n,e,r,a){function i(t){return t instanceof r?t:new r(function(l){l(t)})}return new(r||(r=Promise))(function(t,l){function o(c){try{s(a.next(c))}catch(h){l(h)}}function u(c){try{s(a.throw(c))}catch(h){l(h)}}function s(c){c.done?t(c.value):i(c.value).then(o,u)}s((a=a.apply(n,[])).next())})}function F(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var L,R;function U(){return R||(R=1,L=function n(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var a,i,t;if(Array.isArray(e)){if(a=e.length,a!=r.length)return!1;for(i=a;i--!==0;)if(!n(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(t=Object.keys(e),a=t.length,a!==Object.keys(r).length)return!1;for(i=a;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,t[i]))return!1;for(i=a;i--!==0;){var l=t[i];if(!n(e[l],r[l]))return!1}return!0}return e!==e&&r!==r}),L}var K=U(),G=F(K);const A="__googleMapsScriptId";var P;(function(n){n[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE"})(P||(P={}));class w{constructor({apiKey:e,authReferrerPolicy:r,channel:a,client:i,id:t=A,language:l,libraries:o=[],mapIds:u,nonce:s,region:c,retries:h=3,url:m="https://maps.googleapis.com/maps/api/js",version:d}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=r,this.channel=a,this.client=i,this.id=t||A,this.language=l,this.libraries=o,this.mapIds=u,this.nonce=s,this.region=c,this.retries=h,this.url=m,this.version=d,w.instance){if(!G(this.options,w.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(w.instance.options)}`);return w.instance}w.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?P.FAILURE:this.done?P.SUCCESS:this.loading?P.LOADING:P.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,r)=>{this.loadCallback(a=>{a?r(a.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,r;if(document.getElementById(this.id)){this.callback();return}const a={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(a).forEach(t=>!a[t]&&delete a[t]),!((r=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||r===void 0)&&r.importLibrary||(t=>{let l,o,u,s="The Google Maps JavaScript API",c="google",h="importLibrary",m="__ib__",d=document,y=window;y=y[c]||(y[c]={});const v=y.maps||(y.maps={}),p=new Set,E=new URLSearchParams,_=()=>l||(l=new Promise((I,S)=>q(this,void 0,void 0,function*(){var C;yield o=d.createElement("script"),o.id=this.id,E.set("libraries",[...p]+"");for(u in t)E.set(u.replace(/[A-Z]/g,j=>"_"+j[0].toLowerCase()),t[u]);E.set("callback",c+".maps."+m),o.src=this.url+"?"+E,v[m]=I,o.onerror=()=>l=S(Error(s+" could not load.")),o.nonce=this.nonce||((C=d.querySelector("script[nonce]"))===null||C===void 0?void 0:C.nonce)||"",d.head.append(o)})));v[h]?console.warn(s+" only loads once. Ignoring:",t):v[h]=(I,...S)=>p.add(I)&&_().then(()=>v[h](I,...S))})(a);const i=this.libraries.map(t=>this.importLibrary(t));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),t=>{const l=new ErrorEvent("error",{error:t});this.loadErrorCallback(l)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const N=new w({apiKey:"AIzaSyCiBpLlS2nUY1NlBn1tM8If10sdIGm6o8I",version:"weekly",libraries:["places","visualization","maps"]});var z,f,b,g,k,B,D=38.9072,x=-77.0369;function M(n){var e=this,r=new l;e.searchText=ko.observable(n),e.filterText=ko.observable(""),e.places=ko.observableArray([]),e.loadingPlaces=ko.observable(!0),e.search=ko.computed(function(){e.searchText().trim()!==""?r.getPlaces(e.searchText().trim()):e.clearPlaces()}),e.filter=ko.computed(function(){var o=e.filterText();if(!o||o.trim()===""){e.places().forEach(function(s){s.show(!0),s.marker&&typeof s.marker.setVisible=="function"&&s.marker.setVisible(!0)});return}var u=new RegExp(o,"i");e.places().forEach(function(s){var c=s.name.search(u)!==-1;if(s.show(c),s.marker&&typeof s.marker.setVisible=="function"&&(s.marker.setVisible(c),!c&&g&&typeof g.getPosition=="function"&&typeof s.marker.getPosition=="function"))try{g.getPosition()&&s.marker.getPosition()&&g.getPosition().equals(s.marker.getPosition())&&g.close()}catch{}})});function a(o){var u=new B({map:f,position:{lng:o.location.coordinate.longitude,lat:o.location.coordinate.latitude},icon:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png"});u.addListener("click",function(){i(o,u)},!1),o.marker=u,o.show=ko.observable(!0),e.places.push(o)}function i(o,u){f.setCenter(u.getPosition()),r.getPlaceDetails(o,u)}e.clearPlaces=function(){for(var o=e.places().length,u=0;u<o;u++){var s=e.places().shift();s.marker.setMap(null)}e.places.removeAll()},e.getPlaceInfo=function(o){window.innerWidth<500&&!$("#menu").hasClass("menu-close")&&t(o.marker.getPosition()),i(o,o.marker)},e.toggleMenu=function(){var o={lat:b.coords.latitude,lng:b.coords.longitude};t(o)};function t(o){var u=$("#map"),s=$("#menu");u.toggleClass("map-close"),s.toggleClass("menu-close"),setTimeout(function(){var c=g.getContent();z.maps.event.trigger(f,"resize"),f.panTo(o),g.setContent(c)},500)}function l(){async function o(s,c){g.open(f,c),g.setContent("Loading Place Details..."),f.panTo(c.getPosition());var h={fields:["displayName","nationalPhoneNumber","rating","websiteURI","photos","location"]};const m=new k({id:s.place_id,requestedLanguage:"en"});try{const{place:v}=await m.fetchFields(h),p=v.Dg;var d="";p.photos&&p.photos.length>0&&(d=`https://places.googleapis.com/v1/${p.photos[0].name}/media/?maxWidthPx=200&maxHeightPx=200&key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg`);var y=`
                        <div class="place-container">
                            <div class="place-image">
                                ${d?`<img src="${d}"/>`:"<div>No image available</div>"}
                            </div>
                            <div class="place-info">
                                <p><strong>Name:</strong> ${p.displayName||"N/A"}</p>
                                <p><strong>Phone:</strong> ${p.nationalPhoneNumber||"N/A"}</p>
                                <p><strong>Rating:</strong> ${p.rating||"N/A"}</p>
                                ${p.websiteURI?`<p><a href="${p.websiteURI}">Find Out More</a></p>`:""}
                            </div>
                        </div>
                    `;g.setContent(y)}catch(v){O("Places service failed: "+v),g.setContent("Error loading place details.")}}async function u(s){e.loadingPlaces(!0),console.log(f),console.log(f.getBounds()),console.log(f.getCenter());var c={locationRestriction:f.getBounds(),textQuery:s,fields:["displayName","nationalPhoneNumber","rating","websiteURI","photos","location"],language:"en-US",maxResultCount:8,minRating:3.2};try{const{places:m}=await k.searchByText(c);e.clearPlaces();var h=m.slice(0,10).map(d=>d.Dg);h.forEach(function(d){var y={id:d.id,place_id:d.id,name:d.displayName,location:{coordinate:{latitude:d.location.lat,longitude:d.location.lng}}};a(y)})}catch(m){O("Places search failed: "+m)}finally{document.getElementById("places-loader").className+=" hidden",e.loadingPlaces(!1)}}return{getPlaceDetails:o,getPlaces:u}}}async function W(){const{Map:n,InfoWindow:e}=await N.importLibrary("maps"),{Place:r}=await N.importLibrary("places"),{Marker:a}=await N.importLibrary("marker");B=a,navigator.geolocation.getCurrentPosition(i,t);function i(l){b=l,console.log(b),f=new n(document.getElementById("map"),{center:{lat:b.coords.latitude,lng:b.coords.longitude},zoom:12,mapTypeControl:!1}),g=new e,k=r,ko.applyBindings(new M("art gallery"));var o=document.getElementById("map-loader");o!==null&&(document.getElementById("map-loader").className+=" hidden")}function t(l){alert('Showing search results for "art gallery" near default location of Washington DC because we could not access geolocation data'),f=new n(document.getElementById("map"),{center:{lat:D,lng:x},zoom:12,mapTypeControl:!1}),b={coords:{latitude:D,longitude:x}},g=new e,k=r,ko.applyBindings(new M("art gallery"));var o=document.getElementById("map-loader");o!==null&&(document.getElementById("map-loader").className+=" hidden")}}W();var O=function(n){console.error("Something has gone wrong. Please try refreshing the page. ",n)};window.onerror=function(n){O(n)};function T(){var n=document.getElementById("page-loader");document.body.removeChild(n)}document.readyState==="complete"||document.readyState==="loading"&&!document.documentElement.doScroll?T():document.addEventListener("DOMContentLoaded",T);
